<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <title>Register - Cahaya Az Zahra Enterprise</title>
  <link rel="stylesheet" href="styles/main.css">
  <style>
    .registration-page {
      max-width: 500px;
      margin: 2rem auto;
      animation: fadeIn 0.3s ease-in;
    }

    .password-rules {
      font-size: 0.8em;
      color: #c5a047;
      margin: 5px 0 15px;
      padding-left: 10px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .registration-page {
        padding: 1rem;
        margin: 1rem auto;
      }
      
      input, button {
        font-size: 16px;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container registration-page">
    <h1>New Account Registration</h1>
    
    <div class="input-group">
      <input type="tel" 
             id="regPhone" 
             placeholder="Phone Number (673/60 format)"
             pattern="^(673|60)\d+"
             required>
      <div class="error-message" id="phoneError"></div>
    </div>

    <div class="input-group">
      <input type="password" 
             id="regPassword" 
             placeholder="Create Password"
             required>
      <div class="password-rules">6+ characters, 1 uppercase letter, 1 number</div>
      <div class="error-message" id="passError"></div>
    </div>

    <div class="input-group">
      <input type="password" 
             id="regConfirmPass" 
             placeholder="Confirm Password" 
             required>
      <div class="error-message" id="confirmPassError"></div>
    </div>

    <div class="input-group">
      <input type="email" 
             id="regEmail" 
             placeholder="Email Address" 
             required>
      <div class="error-message" id="emailError"></div>
    </div>

    <div class="input-group">
      <input type="email" 
             id="regConfirmEmail" 
             placeholder="Confirm Email" 
             required>
      <div class="error-message" id="confirmEmailError"></div>
    </div>

    <button id="registerBtn" onclick="handleRegistration()">Register</button>
    
    <div class="auth-links" style="margin-top: 1.5rem;">
      <button class="secondary-btn" 
              onclick="safeRedirect('login.html')">
        Already have an account? Login
      </button>
    </div>

    <div id="registrationStatus" class="status-message"></div>
  </div>

  <script src="scripts/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      detectViewMode();
      
      // Real-time validation listeners
      document.getElementById('regPhone')?.addEventListener('input', function() {
        document.getElementById('phoneError').textContent = 
          !validatePhone(this.value) ? 'Invalid phone format' : '';
      });

      document.getElementById('regPassword')?.addEventListener('input', function() {
        document.getElementById('passError').textContent = 
          !validatePassword(this.value) ? 'Invalid password format' : '';
      });

      document.getElementById('regConfirmPass')?.addEventListener('input', function() {
        const pass = document.getElementById('regPassword')?.value;
        document.getElementById('confirmPassError').textContent = 
          this.value !== pass ? 'Passwords mismatch' : '';
      });

      document.getElementById('regEmail')?.addEventListener('input', function() {
        document.getElementById('emailError').textContent = 
          !validateEmail(this.value) ? 'Invalid email format' : '';
      });

      document.getElementById('regConfirmEmail')?.addEventListener('input', function() {
        const email = document.getElementById('regEmail')?.value;
        document.getElementById('confirmEmailError').textContent = 
          this.value !== email ? 'Emails mismatch' : '';
      });
    });
  </script>
</body>
</html>
