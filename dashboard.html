<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Cahaya Az Zahra Enterprise</title>
  <link rel="stylesheet" href="styles/main.css">
  <style>
    .dashboard-page {
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
    }

    .thumbnail-container {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      margin-top: 30px;
    }

    .thumbnail {
      background: rgba(255, 255, 255, 0.05);
      padding: 25px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid var(--gold);
      text-align: center;
    }

    .thumbnail:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(197, 160, 71, 0.2);
    }

    .thumbnail h2 {
      color: var(--gold);
      margin-bottom: 15px;
      font-size: 1.4em;
    }

    .welcome-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 1000;
      overflow-y: auto;
    }

    .welcome-content {
      background: var(--dark-bg);
      margin: 2% auto;
      padding: 30px;
      border: 2px solid var(--gold);
      border-radius: 10px;
      max-width: 800px;
      color: white;
    }

    .gold-text {
      color: var(--gold) !important;
      font-weight: bold;
      margin: 15px 0;
    }

    @media (max-width: 768px) {
      .dashboard-page {
        padding: 10px;
      }
      
      .welcome-content {
        padding: 15px;
        margin: 10px;
      }
      
      .thumbnail {
        margin: 10px 0;
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container dashboard-page">
    <h1>Welcome to Your Dashboard</h1>
    
    <div class="thumbnail-container">
      <div class="thumbnail" onclick="safeRedirect('my-info.html')">
        <h2>üìÅ My Information</h2>
        <p>View and update your account details</p>
      </div>
      
      <div class="thumbnail" onclick="safeRedirect('parcel-declaration.html')">
        <h2>üì¶ New Parcel Declaration</h2>
        <p>Submit a new parcel for customs clearance</p>
      </div>
      
      <div class="thumbnail" onclick="safeRedirect('track-parcel.html')">
        <h2>üöö Track Parcels</h2>
        <p>Check status of your submitted parcels</p>
      </div>
    </div>
    
    <button class="logout-btn" onclick="handleLogout()" style="margin-top: 30px;">
      Log Out
    </button>
  </div>

  <!-- Welcome Modal -->
  <div id="welcomeModal" class="welcome-modal">
    <div class="welcome-content">
      <strong class="gold-text">MAKLUMAN PENTING. SILA BACA</strong>
      
      <div class="modal-section">
        <p><strong class="gold-text">Tolong submit tracking details biskita seawalnya jika biskita ada mengunakan shipping address alamat kami di limbang. Tidak perlu menunggu kiriman dari pihak kami lagi.</strong></p>
        
        <p>Sila check sea shipping, jika parcel sudah sampai Malaysia, perubahan tracking akan berlaku, sila update/submit tracking terkini yang telah sampai di Limbang.</p>
        
        <p><strong class="gold-text">Please do not key in any Tracking details that is not yours and if you're not sure about it please do ask admin to ensure about it.</strong></p>
        <p><strong class="gold-text">Parcel Items not key-in will be left at storage. Parcel staying at storage can have high chance of lost. If it is lost, it is not our responsibility anymore.</strong></p>
      </div>

      <div class="modal-section">
        <ul class="guidelines">
          <li>Pastikan Details adalah betul.</li>
          <li>Buat details nama yg mudah difahami sahaja, tidak perlu panjang.</li>
          <li>Nombor telefon penerima di Brunei, pihak kami akan hubungi.</li>
          <li>Jika parcel dalam satu tracking mempunyai banyak keterangan item, sila senaraikan "breakdown" satu persatu termasuk harga & kuantiti.</li>
          <li>Harga termasuk postage.</li>
          <li>Item yang memerlukan permit(under control), sila sediakan semua document yg diperlukan.</li>
        </ul>
      </div>

      <div class="modal-section">
        <strong class="gold-text">Untuk Cosmetics, Supplements, Foods or Drinks:</strong>
        <ul class="guidelines">
          <li>Screenshot invoice adalah dimestikan.</li>
          <li>Pastikan butiran nama penerima dan summary shipping dapat dilihat dengan jelas.</li>
          <li>Gambar IC depan & belakang atau kirimkan nombor IC dan alamat kepada admin.</li>
          <li>Untuk bungkusan cosmetic, pastikan barangan bukan untuk dijual, hanya personal use kegunaan sendiri sahaja, limit harga tidak boleh melebihi $200, berat maksimum 2KG kebawah <strong class="gold-text">*kecuali biskita ada DPS permit dibawah syarikat sendiri.</strong></li>
        </ul>
      </div>

      <div class="modal-section">
        <strong class="gold-text">Untuk AITI:</strong>
        <ul class="guidelines">
          <li>Kesemua barangan yang mempunyai Bluetooth atau Wireless RC car yg mempunyai "remote control", Handphone & laptop hendak lah memohon permit di AITI dahulu, kuantiti tidak boleh melebihi 5 unit.</li>
          <li>Invoice</li>
          <li>Gambar IC depan belakang.</li>
          <li>Copy link dari Shopee atau Lazada.</li>
        </ul>
      </div>

      <div class="modal-section">
        <strong class="gold-text">Untuk buku:</strong>
        <ul class="guidelines">
          <li>Sediakan invoice.</li>
          <li>Gambar IC.</li>
        </ul>
      </div>

      <div class="modal-section warning">
        <p><strong class="gold-text">‚óè SILA SEMAK SEBELUM SUBMIT.</strong></p>
        <p><strong class="gold-text">‚óè PASTIKAN SEMUA KETERANGAN ADALAH BETUL.</strong></p>
        <p>Note: In completing this declaration, units and items for making an untrue or incorrect declaration will be taken risk by own consignee.</p>
        <p>Undeclared parcel will be hold in Limbang for anyone that did not provide their detail on time. Kindly please cooperate, Thank you.üòä</p>
      </div>

      <div class="modal-footer">
        <button class="agree-btn" onclick="closeWelcomeModal()">Saya faham & setuju</button>
      </div>
    </div>
  </div>

  <script src="scripts/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize user session
      const userData = checkSession();
      if (!userData) return;

      // Show welcome modal only once per session
      if (!sessionStorage.getItem('welcomeShown')) {
        document.getElementById('welcomeModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
        sessionStorage.setItem('welcomeShown', 'true');
      }

      // Update dashboard with user info
      const phoneSpan = document.createElement('span');
      phoneSpan.className = 'gold-text';
      phoneSpan.textContent = `Logged in as: ${userData.phone}`;
      document.querySelector('.dashboard-page h1').appendChild(phoneSpan);
    });

    function closeWelcomeModal() {
      document.getElementById('welcomeModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    window.onclick = function(event) {
      const modal = document.getElementById('welcomeModal');
      if (event.target === modal) {
        closeWelcomeModal();
      }
    }

    // Navigation functions
    window.safeRedirect = function(path) {
      try {
        if (!path) return;
        window.location.href = path;
      } catch (error) {
        console.error('Navigation error:', error);
        window.location.href = 'login.html';
      }
    }

    window.handleLogout = function() {
      sessionStorage.clear();
      safeRedirect('login.html');
    }

    // Test function for development
    function testSubmission() {
      console.log('Current user:', JSON.parse(sessionStorage.getItem('userData')));
      console.log('Last activity:', localStorage.getItem('lastActivity'));
    }
  </script>
</body>
</html>

